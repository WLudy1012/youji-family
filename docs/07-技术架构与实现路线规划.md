# Youji Family 数字家族系统
## 技术架构与实现路线规划文档

## 一、项目定位
本项目旨在打造一个融合传统家族文化、魔法神秘气质与科技未来感的数字化家族档案系统。系统包含以下核心部分：

- 家族展示前端（用户访问门户）
- 管理后台系统（内容与成员管理）
- API 服务层（业务逻辑与权限校验）
- 数据持久化层（结构化数据与缓存）
- 服务器部署架构（上线运行与运维）

---

## 二、总体技术架构

```text
Nginx → Frontend (React) → Backend (Node.js + Express) → PostgreSQL → Redis
```

说明：
- **Nginx**：统一入口，承担反向代理、静态资源托管、HTTPS 终止。
- **Frontend**：负责家族内容展示与交互体验。
- **Backend**：提供 REST API、鉴权、业务编排。
- **PostgreSQL**：承载核心业务数据。
- **Redis**：提供缓存、会话/令牌状态辅助存储与性能优化。

---

## 三、前端技术选型

- **React + Vite + TypeScript**
- **TailwindCSS + 自定义主题变量系统**
- **Framer Motion**（动效系统）
- **tsParticles**（粒子背景）
- **React Router v6**（路由）
- **React Context + useReducer**（状态管理）

设计方向：以“家族传承叙事”为主线，融合“魔法神秘”与“未来科技”视觉风格，强调沉浸感与可读性并存。

---

## 四、后台管理系统技术选型

- **React + Vite + TypeScript**
- **Ant Design（深度自定义深色主题）**

设计风格：
- **魔法档案控制台** + **科技研究所界面**
- 聚焦高密度信息管理、低学习成本和清晰权限边界

---

## 五、后端技术选型

- **Node.js + Express**
- **Prisma ORM**
- **PostgreSQL 数据库**
- **Redis 缓存系统**

核心目标：
- 高可维护 API 分层
- 强一致数据模型（PostgreSQL）
- 高并发读取优化（Redis）
- 平滑支持后续多租户/多家族扩展

---

## 六、认证与安全机制

采用 **JWT + Refresh Token 双令牌机制**：

- **Access Token**：15 分钟
- **Refresh Token**：7 天（HttpOnly Cookie）

安全策略：
- 强制 HTTPS
- 后端统一验证 Token
- 前端自动刷新与登出机制
- 可扩展风控策略（IP/设备/行为）

---

## 七、部署架构（自建服务器）

服务器目录结构示例：

```text
/var/www/youji
  ├── frontend/
  ├── admin/
  ├── backend/
```

基础组件：
- **Nginx**（网关与静态托管）
- **PM2**（Node 进程守护）
- **PostgreSQL**（主数据库）
- **Redis**（缓存与辅助状态）

---

## 八、项目目录结构规划

```text
youji-family/
  ├── frontend/
  ├── admin/
  ├── backend/
  ├── nginx/
  ├── docker/
  └── README.md
```

建议补充：
- `docs/`：架构、接口、运维等文档统一管理
- `scripts/`：部署与初始化脚本
- `.github/workflows/`：CI/CD 流程

---

## 九、未来扩展方向

- 家族关系可视化图谱
- 多管理员权限体系
- 家族动态公告系统
- 文件云存储系统
- SaaS 多家族版本

---

## 十、总体评价

该技术栈具备良好的长期维护能力、扩展能力与安全性，同时支持高可定制视觉系统，能够支撑数字家族档案系统的长期运行与持续升级。
